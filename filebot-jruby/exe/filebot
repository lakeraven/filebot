#!/usr/bin/env ruby
# frozen_string_literal: true

require "filebot"

# Simple CLI interface for FileBot
class FileBotCLI
  def self.run(args)
    case args[0]
    when "version"
      puts "FileBot #{FileBot::VERSION}"
    when "test"
      puts "ğŸ§ª Testing FileBot connection..."
      begin
        filebot = FileBot.new(:iris)
        puts "âœ… FileBot initialized successfully"
        puts "ğŸ“Š Available operations: patient_lookup, search, workflows"
      rescue => e
        puts "âŒ Error: #{e.message}"
        puts "ğŸ’¡ Check IRIS credentials and JAR files"
      end
    when "help", "--help", "-h", nil
      puts <<~HELP
        FileBot - Healthcare MUMPS Modernization Platform
        
        Usage:
          filebot [command]
        
        Commands:
          version    Show FileBot version
          test       Test database connection
          help       Show this help message
        
        Examples:
          filebot version
          filebot test
        
        Documentation: https://www.github.com/lakeraven/filebot
      HELP
    else
      puts "Unknown command: #{args[0]}"
      puts "Run 'filebot help' for available commands"
    end
  end
end

FileBotCLI.run(ARGV) if __FILE__ == $0